function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{MyMQ:function(e,t,a){"use strict";a.r(t),a.d(t,"CollectionDataModule",(function(){return w}));var i,n=a("ofXK"),c=a("tyNb"),o=a("AytR"),r=a("fXoL"),l=a("tk/3"),s=a("rj1t"),b=a("3LUQ"),u=((i=function(){function e(t,a,i,n){_classCallCheck(this,e),this.http=t,this.router=a,this.ts=i,this.as=n}return _createClass(e,[{key:"create",value:function(e,t){var a=this;this.http.post("".concat(e.baseUrl,"/").concat(e.createUrl),t).subscribe((function(e){e.success?a.as.successToast(e.msg):a.as.errorToast(e.msg)}))}},{key:"processProduct",value:function(e,t){var a=this;this.http.post("".concat(e.baseUrl,"/").concat(e.processProductURL),t).subscribe((function(e){e.success?a.as.successToast(e.msg):a.as.errorToast(e.msg)}))}},{key:"generateExcel",value:function(e,t){var a=this;this.http.get("".concat(e.baseUrl,"/").concat(e.generateExcelUrl,"/").concat(t)).subscribe((function(e){e.success?(a.link=e.data,console.log(a.link),a.as.successToast(e.msg)):a.as.errorToast(e.msg)}))}}]),e}()).\u0275fac=function(e){return new(e||i)(r.Ub(l.b),r.Ub(c.c),r.Ub(s.a),r.Ub(b.a))},i.\u0275prov=r.Hb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),d=a("3Pt+");function p(e,t){if(1&e&&(r.Qb(0,"div",4),r.Qb(1,"div",5),r.Qb(2,"a",22),r.zc(3,"Click here to Download"),r.Pb(),r.Pb(),r.Pb()),2&e){var a=r.cc();r.zb(2),r.lc("href","",a.env.url,"/uploads/",a.collectionService.link,"",r.tc)}}var f,v,h,m=((h=function(){function e(t){_classCallCheck(this,e),this.collectionService=t,this.env=o.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(e){var t=Object.assign({},e.value);this.collectionService.create({baseUrl:"http://35.154.176.14:3000/apiv1",createUrl:"collection/"},t)}},{key:"generateExcel",value:function(){this.collection_name&&this.collectionService.generateExcel({baseUrl:"http://35.154.176.14:3000/apiv1",generateExcelUrl:"collection/export"},this.collection_name)}}]),e}()).\u0275fac=function(e){return new(e||h)(r.Lb(u))},h.\u0275cmp=r.Fb({type:h,selectors:[["app-create"]],decls:58,vars:2,consts:[[1,"card"],[1,"card-body"],[3,"ngSubmit"],["collectionform","ngForm"],[1,"row"],[1,"col"],[1,"form-group"],["for","collection_name"],["name","collection_name","id","collection_name","ngModel","",1,"form-control"],["for","field_name"],["type","text","name","field_name","ngModel","","id","field_name","aria-describedby","field_namehelpId",1,"form-control"],["for","field_type"],["type","text","name","field_type","ngModel","","id","field_type","aria-describedby","field_typehelpId",1,"form-control"],["for","field_value"],["type","text","name","field_value","ngModel","","id","field_value","aria-describedby","field_typehelpId",1,"form-control"],["for","mandatory"],["name","mandatory","id","mandatory","ngModel","",1,"form-control"],[1,"col-auto"],[1,"btn","btn-primary"],["name","collection_name","id","collection_name",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],["class","row",4,"ngIf"],["target","_blank",1,"btn","btn-primary",3,"href"]],template:function(e,t){if(1&e){var a=r.Rb();r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"form",2,3),r.Yb("ngSubmit",(function(){r.rc(a);var e=r.pc(3);return t.submit(e)})),r.Qb(4,"div",4),r.Qb(5,"div",5),r.Qb(6,"div",6),r.Qb(7,"label",7),r.zc(8,"Collection Name"),r.Pb(),r.Qb(9,"select",8),r.Qb(10,"option"),r.zc(11,"student"),r.Pb(),r.Qb(12,"option"),r.zc(13,"member"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(14,"div",5),r.Qb(15,"div",6),r.Qb(16,"label",9),r.zc(17,"Name"),r.Pb(),r.Mb(18,"input",10),r.Pb(),r.Pb(),r.Qb(19,"div",5),r.Qb(20,"div",6),r.Qb(21,"label",11),r.zc(22,"Type"),r.Pb(),r.Mb(23,"input",12),r.Pb(),r.Pb(),r.Qb(24,"div",5),r.Qb(25,"div",6),r.Qb(26,"label",13),r.zc(27,"Value"),r.Pb(),r.Mb(28,"input",14),r.Pb(),r.Pb(),r.Qb(29,"div",5),r.Qb(30,"div",6),r.Qb(31,"label",15),r.zc(32,"Mandatory"),r.Pb(),r.Qb(33,"select",16),r.Qb(34,"option"),r.zc(35,"true"),r.Pb(),r.Qb(36,"option"),r.zc(37,"false"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(38,"div",4),r.Qb(39,"div",17),r.Qb(40,"button",18),r.zc(41,"Submit"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(42,"div",0),r.Qb(43,"div",1),r.Qb(44,"div",4),r.Qb(45,"div",5),r.Qb(46,"div",6),r.Qb(47,"label",7),r.zc(48,"Collection Name"),r.Pb(),r.Qb(49,"select",19),r.Yb("ngModelChange",(function(e){return t.collection_name=e})),r.Qb(50,"option"),r.zc(51,"student"),r.Pb(),r.Qb(52,"option"),r.zc(53,"member"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(54,"div",17),r.Qb(55,"button",20),r.Yb("click",(function(){return t.generateExcel()})),r.zc(56," generate Excel "),r.Pb(),r.Pb(),r.xc(57,p,4,2,"div",21),r.Pb(),r.Pb()}2&e&&(r.zb(49),r.ic("ngModel",t.collection_name),r.zb(8),r.ic("ngIf",t.collectionService.link))},directives:[d.q,d.g,d.h,d.o,d.f,d.i,d.j,d.p,d.a,n.j],styles:[""]}),h),P=((v=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"uploadFile",value:function(e){var t=new FormData;return t.append("file",e,e.name),this.http.post(o.a.url+"/file/upload",t,{reportProgress:!0,observe:"events"})}},{key:"uploadS3File",value:function(e){var t=new FormData;return t.append("file",e,e.name),this.http.post(o.a.url+"/file/uploadS3File",t,{reportProgress:!0,observe:"events"})}},{key:"uploadFilewoName",value:function(e,t){var a=new FormData;return a.append("docname",Date.now()+"_"+e.name),a.append("mobile",t),a.append("file",e,e.name),console.log(a),this.http.post(o.a.url+"/file/upload",a,{reportProgress:!0,observe:"events"})}},{key:"saveUploadedFile",value:function(e){return this.http.post(o.a.url+"/fileSave/createFileRecord",e)}},{key:"getFilesList",value:function(e){return this.http.post(o.a.url+"/fileSave/getFilesList",e)}},{key:"processLeadsFile",value:function(e){return console.log(e),this.http.post(o.a.url+"/file/processLeadsFile",e)}}]),e}()).\u0275fac=function(e){return new(e||v)(r.Ub(l.b))},v.\u0275prov=r.Hb({token:v,factory:v.\u0275fac,providedIn:"root"}),v),g=((f=function(){function e(t){_classCallCheck(this,e),this.http=t,this.api="studentfile"}return _createClass(e,[{key:"create",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/create"),e)}},{key:"updateById",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/updateById"),e)}},{key:"getList",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/getList"),e)}},{key:"getDeletedList",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/getDeletedList"),e)}},{key:"getDataById",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/getDataById"),e)}},{key:"deleteDataById",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/deleteDataById"),e)}},{key:"restoreDataById",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/restoreDataById"),e)}},{key:"processDataById",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/processDataById"),e)}},{key:"processQuestionDataById",value:function(e){return this.http.post("".concat(o.a.url,"/").concat(this.api,"/processQuestionDataById"),e)}}]),e}()).\u0275fac=function(e){return new(e||f)(r.Ub(l.b))},f.\u0275prov=r.Hb({token:f,factory:f.\u0275fac,providedIn:"root"}),f);function y(e,t){if(1&e){var a=r.Rb();r.Qb(0,"div"),r.Qb(1,"span",30),r.Yb("click",(function(){r.rc(a);var e=r.cc(2);return e.validateCheck=!e.validateCheck})),r.Mb(2,"i",31),r.Pb(),r.Pb()}}function Q(e,t){if(1&e){var a=r.Rb();r.Qb(0,"tr"),r.Qb(1,"td"),r.zc(2),r.Pb(),r.Qb(3,"td"),r.zc(4),r.Pb(),r.Qb(5,"td"),r.zc(6),r.dc(7,"date"),r.Pb(),r.Qb(8,"td"),r.xc(9,y,3,0,"div",28),r.Pb(),r.Qb(10,"td"),r.Qb(11,"button",29),r.Yb("click",(function(){r.rc(a);var e=t.$implicit;return r.cc().processData(e._id)})),r.zc(12),r.Pb(),r.Pb(),r.Pb()}if(2&e){var i=t.$implicit,n=r.cc();r.zb(2),r.Bc(" ",n.extractFileName(i.filename)," "),r.zb(2),r.Bc(" ",i.created_by," "),r.zb(2),r.Bc(" ",r.fc(7,5,i.created_at,"medium")," "),r.zb(3),r.ic("ngIf",!n.validate),r.zb(3),r.Bc(" Process ",n.collection_name?n.collection_name:""," Data ")}}var _,k,z,F=[{path:"create",component:m},{path:"upload",component:(_=function(){function e(t,a,i){_classCallCheck(this,e),this.alert=t,this.fileService=a,this.studentFileService=i,this.dataList=[],this.programs=[],this.validateCheck=!1,this.validate=!1,this.env=o.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.studentFileService.getList({}).subscribe((function(t){t.success?e.dataList=t.data:e.alert.errorToast(t.msg)}))}},{key:"extractFileName",value:function(e){return e.split("\\").pop()}},{key:"selectFile",value:function(e){this.permissionLetterFile=e.target.files.length?e.target.files[0]:null}},{key:"submit",value:function(e){var t=this;if(e.valid){var a=document.getElementById("uploadProgress");this.fileService.uploadFile(this.permissionLetterFile).subscribe((function(i){i.type==l.e.UploadProgress?a.style.width=Math.round(100*i.loaded/i.total)+"%":i.type==l.e.Response&&(e.value.path=i.body.file.path,e.value.filename=e.value.student_data_file,t.createStudentFile(e))}))}else this.alert.warningToast("Please fill all the fields properly!")}},{key:"createStudentFile",value:function(e){var t=this;this.studentFileService.create(e.value).subscribe((function(a){a.success?(t.alert.successToast("File Added!"),e.reset(),t.getData()):t.alert.warningToast(a.msg)}))}},{key:"processData",value:function(e){var t=this;if(!this.collection_name)return this.alert.warningToast("Select Collection Name!");this.studentFileService.processDataById({id:e,program:this.collection_name}).subscribe((function(e){e.success?t.alert.successToast("Processed!"):t.alert.warningToast(e.msg)}))}}]),e}(),_.\u0275fac=function(e){return new(e||_)(r.Lb(b.a),r.Lb(P),r.Lb(g))},_.\u0275cmp=r.Fb({type:_,selectors:[["app-upload-file"]],decls:61,vars:3,consts:[[1,"card","mb-2"],[1,"card-header"],["aria-hidden","true",1,"fa","fa-user"],[1,"card-body"],[3,"submit"],["studentDataForm","ngForm"],[1,"form-group"],["for","student_data_file"],["type","file","ngModel","","hidden","","name","student_data_file","id","student_data_file","aria-describedby","student_data_fileHelpId","placeholder","Upload Student File","required","",1,"form-control",3,"change"],["permissionLetter",""],[1,"row"],[1,"col-12","col-md-6"],["type","button",1,"btn","btn-sm","btn-block","btn-primary",3,"click"],["id","filename"],[1,"col-12"],[1,"progress"],["id","uploadProgress","role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","0%"],["id","institute_director_contact_mobileHelpId",1,"form-text","text-muted"],["type","submit",1,"btn","btn-success"],["type","reset",1,"btn","btn-danger"],[1,"card"],[1,"col"],["aria-hidden","true",1,"fa","fa-table"],[1,"col","text-right"],["for","program"],["name","collection_name","id","collection_name",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-responsive","table-striped","table-bordered"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-warning",3,"click"],[1,"cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-download"]],template:function(e,t){if(1&e){var a=r.Rb();r.Qb(0,"div",0),r.Qb(1,"div",1),r.Mb(2,"i",2),r.zc(3," Data Management "),r.Pb(),r.Qb(4,"div",3),r.Qb(5,"form",4,5),r.Yb("submit",(function(){r.rc(a);var e=r.pc(6);return t.submit(e)})),r.Qb(7,"div",6),r.Qb(8,"label",7),r.zc(9,"Data File"),r.Pb(),r.Qb(10,"input",8,9),r.Yb("change",(function(e){return t.selectFile(e)})),r.Pb(),r.Qb(12,"div",10),r.Qb(13,"div",11),r.Qb(14,"button",12),r.Yb("click",(function(){return r.rc(a),r.pc(11).click()})),r.zc(15," Upload File "),r.Pb(),r.Pb(),r.Qb(16,"div",11),r.Qb(17,"span",13),r.zc(18),r.Pb(),r.Pb(),r.Qb(19,"div",14),r.Qb(20,"div",15),r.Mb(21,"div",16),r.Pb(),r.Pb(),r.Pb(),r.Qb(22,"small",17),r.zc(23,"Upload Data File"),r.Pb(),r.Pb(),r.Qb(24,"div"),r.Qb(25,"button",18),r.zc(26,"Submit"),r.Pb(),r.Qb(27,"button",19),r.zc(28,"Reset"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(29,"div",20),r.Qb(30,"div",1),r.Qb(31,"div",10),r.Qb(32,"div",21),r.Mb(33,"i",22),r.zc(34," Data File "),r.Pb(),r.Qb(35,"div",23),r.Qb(36,"div",10),r.Qb(37,"div",21),r.Qb(38,"label",24),r.zc(39,"Select Program: "),r.Pb(),r.Pb(),r.Qb(40,"div",21),r.Qb(41,"div",6),r.Qb(42,"select",25),r.Yb("ngModelChange",(function(e){return t.collection_name=e})),r.Qb(43,"option"),r.zc(44,"student"),r.Pb(),r.Qb(45,"option"),r.zc(46,"member"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(47,"div",3),r.Qb(48,"table",26),r.Qb(49,"tr"),r.Qb(50,"th"),r.zc(51,"Filename"),r.Pb(),r.Qb(52,"th"),r.zc(53,"By"),r.Pb(),r.Qb(54,"th"),r.zc(55,"Timestamp"),r.Pb(),r.Qb(56,"th"),r.zc(57,"Link"),r.Pb(),r.Qb(58,"th"),r.zc(59,"Process"),r.Pb(),r.Pb(),r.xc(60,Q,13,8,"tr",27),r.Pb(),r.Pb(),r.Pb()}if(2&e){var i=r.pc(11);r.zb(18),r.Ac(t.extractFileName(i.value)),r.zb(24),r.ic("ngModel",t.collection_name),r.zb(18),r.ic("ngForOf",t.dataList)}},directives:[d.q,d.g,d.h,d.a,d.f,d.i,d.n,d.o,d.j,d.p,n.i,n.j],pipes:[n.d],styles:[""]}),_)}],C=((z=function e(){_classCallCheck(this,e)}).\u0275mod=r.Jb({type:z}),z.\u0275inj=r.Ib({factory:function(e){return new(e||z)},imports:[[c.g.forChild(F)],c.g]}),z),w=((k=function e(){_classCallCheck(this,e)}).\u0275mod=r.Jb({type:k}),k.\u0275inj=r.Ib({factory:function(e){return new(e||k)},imports:[[n.b,C,d.b]]}),k)}}]);