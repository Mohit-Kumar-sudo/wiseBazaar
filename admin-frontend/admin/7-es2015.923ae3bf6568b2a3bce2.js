(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{MyMQ:function(e,t,i){"use strict";i.r(t),i.d(t,"CollectionDataModule",(function(){return Q}));var a=i("ofXK"),r=i("tyNb"),o=i("AytR"),s=i("fXoL"),n=i("tk/3"),c=i("rj1t"),l=i("3LUQ");let b=(()=>{class e{constructor(e,t,i,a){this.http=e,this.router=t,this.ts=i,this.as=a}create(e,t){this.http.post(`${e.baseUrl}/${e.createUrl}`,t).subscribe(e=>{e.success?this.as.successToast(e.msg):this.as.errorToast(e.msg)})}processProduct(e,t){this.http.post(`${e.baseUrl}/${e.processProductURL}`,t).subscribe(e=>{e.success?this.as.successToast(e.msg):this.as.errorToast(e.msg)})}generateExcel(e,t){this.http.get(`${e.baseUrl}/${e.generateExcelUrl}/${t}`).subscribe(e=>{e.success?(this.link=e.data,console.log(this.link),this.as.successToast(e.msg)):this.as.errorToast(e.msg)})}}return e.\u0275fac=function(t){return new(t||e)(s.Ub(n.b),s.Ub(r.c),s.Ub(c.a),s.Ub(l.a))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=i("3Pt+");function p(e,t){if(1&e&&(s.Qb(0,"div",4),s.Qb(1,"div",5),s.Qb(2,"a",22),s.zc(3,"Click here to Download"),s.Pb(),s.Pb(),s.Pb()),2&e){const e=s.cc();s.zb(2),s.lc("href","",e.env.url,"/uploads/",e.collectionService.link,"",s.tc)}}let u=(()=>{class e{constructor(e){this.collectionService=e,this.env=o.a}ngOnInit(){}submit(e){const t=Object.assign({},e.value);this.collectionService.create({baseUrl:"http://35.154.176.14:3000/apiv1",createUrl:"collection/"},t)}generateExcel(){this.collection_name&&this.collectionService.generateExcel({baseUrl:"http://35.154.176.14:3000/apiv1",generateExcelUrl:"collection/export"},this.collection_name)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(b))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-create"]],decls:58,vars:2,consts:[[1,"card"],[1,"card-body"],[3,"ngSubmit"],["collectionform","ngForm"],[1,"row"],[1,"col"],[1,"form-group"],["for","collection_name"],["name","collection_name","id","collection_name","ngModel","",1,"form-control"],["for","field_name"],["type","text","name","field_name","ngModel","","id","field_name","aria-describedby","field_namehelpId",1,"form-control"],["for","field_type"],["type","text","name","field_type","ngModel","","id","field_type","aria-describedby","field_typehelpId",1,"form-control"],["for","field_value"],["type","text","name","field_value","ngModel","","id","field_value","aria-describedby","field_typehelpId",1,"form-control"],["for","mandatory"],["name","mandatory","id","mandatory","ngModel","",1,"form-control"],[1,"col-auto"],[1,"btn","btn-primary"],["name","collection_name","id","collection_name",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],["class","row",4,"ngIf"],["target","_blank",1,"btn","btn-primary",3,"href"]],template:function(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"form",2,3),s.Yb("ngSubmit",(function(){s.rc(e);const i=s.pc(3);return t.submit(i)})),s.Qb(4,"div",4),s.Qb(5,"div",5),s.Qb(6,"div",6),s.Qb(7,"label",7),s.zc(8,"Collection Name"),s.Pb(),s.Qb(9,"select",8),s.Qb(10,"option"),s.zc(11,"student"),s.Pb(),s.Qb(12,"option"),s.zc(13,"member"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(14,"div",5),s.Qb(15,"div",6),s.Qb(16,"label",9),s.zc(17,"Name"),s.Pb(),s.Mb(18,"input",10),s.Pb(),s.Pb(),s.Qb(19,"div",5),s.Qb(20,"div",6),s.Qb(21,"label",11),s.zc(22,"Type"),s.Pb(),s.Mb(23,"input",12),s.Pb(),s.Pb(),s.Qb(24,"div",5),s.Qb(25,"div",6),s.Qb(26,"label",13),s.zc(27,"Value"),s.Pb(),s.Mb(28,"input",14),s.Pb(),s.Pb(),s.Qb(29,"div",5),s.Qb(30,"div",6),s.Qb(31,"label",15),s.zc(32,"Mandatory"),s.Pb(),s.Qb(33,"select",16),s.Qb(34,"option"),s.zc(35,"true"),s.Pb(),s.Qb(36,"option"),s.zc(37,"false"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(38,"div",4),s.Qb(39,"div",17),s.Qb(40,"button",18),s.zc(41,"Submit"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(42,"div",0),s.Qb(43,"div",1),s.Qb(44,"div",4),s.Qb(45,"div",5),s.Qb(46,"div",6),s.Qb(47,"label",7),s.zc(48,"Collection Name"),s.Pb(),s.Qb(49,"select",19),s.Yb("ngModelChange",(function(e){return t.collection_name=e})),s.Qb(50,"option"),s.zc(51,"student"),s.Pb(),s.Qb(52,"option"),s.zc(53,"member"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(54,"div",17),s.Qb(55,"button",20),s.Yb("click",(function(){return t.generateExcel()})),s.zc(56," generate Excel "),s.Pb(),s.Pb(),s.xc(57,p,4,2,"div",21),s.Pb(),s.Pb()}2&e&&(s.zb(49),s.ic("ngModel",t.collection_name),s.zb(8),s.ic("ngIf",t.collectionService.link))},directives:[d.q,d.g,d.h,d.o,d.f,d.i,d.j,d.p,d.a,a.j],styles:[""]}),e})(),h=(()=>{class e{constructor(e){this.http=e}uploadFile(e){const t=new FormData;return t.append("file",e,e.name),this.http.post(o.a.url+"/file/upload",t,{reportProgress:!0,observe:"events"})}uploadS3File(e){const t=new FormData;return t.append("file",e,e.name),this.http.post(o.a.url+"/file/uploadS3File",t,{reportProgress:!0,observe:"events"})}uploadFilewoName(e,t){const i=new FormData;return i.append("docname",Date.now()+"_"+e.name),i.append("mobile",t),i.append("file",e,e.name),console.log(i),this.http.post(o.a.url+"/file/upload",i,{reportProgress:!0,observe:"events"})}saveUploadedFile(e){return this.http.post(o.a.url+"/fileSave/createFileRecord",e)}getFilesList(e){return this.http.post(o.a.url+"/fileSave/getFilesList",e)}processLeadsFile(e){return console.log(e),this.http.post(o.a.url+"/file/processLeadsFile",e)}}return e.\u0275fac=function(t){return new(t||e)(s.Ub(n.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),m=(()=>{class e{constructor(e){this.http=e,this.api="studentfile"}create(e){return this.http.post(`${o.a.url}/${this.api}/create`,e)}updateById(e){return this.http.post(`${o.a.url}/${this.api}/updateById`,e)}getList(e){return this.http.post(`${o.a.url}/${this.api}/getList`,e)}getDeletedList(e){return this.http.post(`${o.a.url}/${this.api}/getDeletedList`,e)}getDataById(e){return this.http.post(`${o.a.url}/${this.api}/getDataById`,e)}deleteDataById(e){return this.http.post(`${o.a.url}/${this.api}/deleteDataById`,e)}restoreDataById(e){return this.http.post(`${o.a.url}/${this.api}/restoreDataById`,e)}processDataById(e){return this.http.post(`${o.a.url}/${this.api}/processDataById`,e)}processQuestionDataById(e){return this.http.post(`${o.a.url}/${this.api}/processQuestionDataById`,e)}}return e.\u0275fac=function(t){return new(t||e)(s.Ub(n.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function f(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div"),s.Qb(1,"span",30),s.Yb("click",(function(){s.rc(e);const t=s.cc(2);return t.validateCheck=!t.validateCheck})),s.Mb(2,"i",31),s.Pb(),s.Pb()}}function P(e,t){if(1&e){const e=s.Rb();s.Qb(0,"tr"),s.Qb(1,"td"),s.zc(2),s.Pb(),s.Qb(3,"td"),s.zc(4),s.Pb(),s.Qb(5,"td"),s.zc(6),s.dc(7,"date"),s.Pb(),s.Qb(8,"td"),s.xc(9,f,3,0,"div",28),s.Pb(),s.Qb(10,"td"),s.Qb(11,"button",29),s.Yb("click",(function(){s.rc(e);const i=t.$implicit;return s.cc().processData(i._id)})),s.zc(12),s.Pb(),s.Pb(),s.Pb()}if(2&e){const e=t.$implicit,i=s.cc();s.zb(2),s.Bc(" ",i.extractFileName(e.filename)," "),s.zb(2),s.Bc(" ",e.created_by," "),s.zb(2),s.Bc(" ",s.fc(7,5,e.created_at,"medium")," "),s.zb(3),s.ic("ngIf",!i.validate),s.zb(3),s.Bc(" Process ",i.collection_name?i.collection_name:""," Data ")}}const v=[{path:"create",component:u},{path:"upload",component:(()=>{class e{constructor(e,t,i){this.alert=e,this.fileService=t,this.studentFileService=i,this.dataList=[],this.programs=[],this.validateCheck=!1,this.validate=!1,this.env=o.a}ngOnInit(){this.getData()}getData(){this.studentFileService.getList({}).subscribe(e=>{e.success?this.dataList=e.data:this.alert.errorToast(e.msg)})}extractFileName(e){return e.split("\\").pop()}selectFile(e){this.permissionLetterFile=e.target.files.length?e.target.files[0]:null}submit(e){if(e.valid){const t=document.getElementById("uploadProgress");this.fileService.uploadFile(this.permissionLetterFile).subscribe(i=>{i.type==n.e.UploadProgress?t.style.width=Math.round(100*i.loaded/i.total)+"%":i.type==n.e.Response&&(e.value.path=i.body.file.path,e.value.filename=e.value.student_data_file,this.createStudentFile(e))})}else this.alert.warningToast("Please fill all the fields properly!")}createStudentFile(e){this.studentFileService.create(e.value).subscribe(t=>{t.success?(this.alert.successToast("File Added!"),e.reset(),this.getData()):this.alert.warningToast(t.msg)})}processData(e){if(!this.collection_name)return this.alert.warningToast("Select Collection Name!");this.studentFileService.processDataById({id:e,program:this.collection_name}).subscribe(e=>{e.success?this.alert.successToast("Processed!"):this.alert.warningToast(e.msg)})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(l.a),s.Lb(h),s.Lb(m))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-upload-file"]],decls:61,vars:3,consts:[[1,"card","mb-2"],[1,"card-header"],["aria-hidden","true",1,"fa","fa-user"],[1,"card-body"],[3,"submit"],["studentDataForm","ngForm"],[1,"form-group"],["for","student_data_file"],["type","file","ngModel","","hidden","","name","student_data_file","id","student_data_file","aria-describedby","student_data_fileHelpId","placeholder","Upload Student File","required","",1,"form-control",3,"change"],["permissionLetter",""],[1,"row"],[1,"col-12","col-md-6"],["type","button",1,"btn","btn-sm","btn-block","btn-primary",3,"click"],["id","filename"],[1,"col-12"],[1,"progress"],["id","uploadProgress","role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","0%"],["id","institute_director_contact_mobileHelpId",1,"form-text","text-muted"],["type","submit",1,"btn","btn-success"],["type","reset",1,"btn","btn-danger"],[1,"card"],[1,"col"],["aria-hidden","true",1,"fa","fa-table"],[1,"col","text-right"],["for","program"],["name","collection_name","id","collection_name",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-responsive","table-striped","table-bordered"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-warning",3,"click"],[1,"cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-download"]],template:function(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",0),s.Qb(1,"div",1),s.Mb(2,"i",2),s.zc(3," Data Management "),s.Pb(),s.Qb(4,"div",3),s.Qb(5,"form",4,5),s.Yb("submit",(function(){s.rc(e);const i=s.pc(6);return t.submit(i)})),s.Qb(7,"div",6),s.Qb(8,"label",7),s.zc(9,"Data File"),s.Pb(),s.Qb(10,"input",8,9),s.Yb("change",(function(e){return t.selectFile(e)})),s.Pb(),s.Qb(12,"div",10),s.Qb(13,"div",11),s.Qb(14,"button",12),s.Yb("click",(function(){return s.rc(e),s.pc(11).click()})),s.zc(15," Upload File "),s.Pb(),s.Pb(),s.Qb(16,"div",11),s.Qb(17,"span",13),s.zc(18),s.Pb(),s.Pb(),s.Qb(19,"div",14),s.Qb(20,"div",15),s.Mb(21,"div",16),s.Pb(),s.Pb(),s.Pb(),s.Qb(22,"small",17),s.zc(23,"Upload Data File"),s.Pb(),s.Pb(),s.Qb(24,"div"),s.Qb(25,"button",18),s.zc(26,"Submit"),s.Pb(),s.Qb(27,"button",19),s.zc(28,"Reset"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(29,"div",20),s.Qb(30,"div",1),s.Qb(31,"div",10),s.Qb(32,"div",21),s.Mb(33,"i",22),s.zc(34," Data File "),s.Pb(),s.Qb(35,"div",23),s.Qb(36,"div",10),s.Qb(37,"div",21),s.Qb(38,"label",24),s.zc(39,"Select Program: "),s.Pb(),s.Pb(),s.Qb(40,"div",21),s.Qb(41,"div",6),s.Qb(42,"select",25),s.Yb("ngModelChange",(function(e){return t.collection_name=e})),s.Qb(43,"option"),s.zc(44,"student"),s.Pb(),s.Qb(45,"option"),s.zc(46,"member"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(47,"div",3),s.Qb(48,"table",26),s.Qb(49,"tr"),s.Qb(50,"th"),s.zc(51,"Filename"),s.Pb(),s.Qb(52,"th"),s.zc(53,"By"),s.Pb(),s.Qb(54,"th"),s.zc(55,"Timestamp"),s.Pb(),s.Qb(56,"th"),s.zc(57,"Link"),s.Pb(),s.Qb(58,"th"),s.zc(59,"Process"),s.Pb(),s.Pb(),s.xc(60,P,13,8,"tr",27),s.Pb(),s.Pb(),s.Pb()}if(2&e){const e=s.pc(11);s.zb(18),s.Ac(t.extractFileName(e.value)),s.zb(24),s.ic("ngModel",t.collection_name),s.zb(18),s.ic("ngForOf",t.dataList)}},directives:[d.q,d.g,d.h,d.a,d.f,d.i,d.n,d.o,d.j,d.p,a.i,a.j],pipes:[a.d],styles:[""]}),e})()}];let g=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[r.g.forChild(v)],r.g]}),e})(),Q=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[a.b,g,d.b]]}),e})()}}]);